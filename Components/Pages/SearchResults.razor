@using MTG.Services
@rendermode InteractiveServer
@using System.Linq
@page "/SearchResult/{searchString}"
@inject NavigationManager NavigationManager

<ul class="image-list">

    @foreach (Services.CardModel myCard in myCards)
    {

            <li>@myCard.Name <br />
            <img src="@myCard.Image" @onclick="() => NavigateToCard(myCard.Name)" />
            </li>
    }

</ul>


@code
{
    IQueryable myCards;
    Services services = new Services();
    [Parameter] public string? searchString { get; set; }
    Search search = new Search();
    private void NavigateToCard(string cardName)
    {
        NavigationManager.NavigateTo($"/Card/{cardName}");
    }
    public void printSearch()
    {

        Console.WriteLine(search.toString());
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        search=search.FromString(searchString);
        printSearch();
        myCards = services.GetCards(search);
    }
}
